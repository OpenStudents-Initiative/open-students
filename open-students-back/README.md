# Backend Open Students

## Documentation

[Class diagram](https://viewer.diagrams.net/?tags=%7B%7D&highlight=0000ff&edit=_blank&layers=1&nav=1&title=BackOpenStudents.drawio#R7V1dc5s6E%2F41uXln7AHx6ct895zmnEmb06bTm45sZJsTjHwAx0l%2F%2FSsM2MAKjAFhJyHtTIwMAvZZ7T7aXSlnyuXi5dbDy%2Flf1CLOGZKslzPl6gwhWRop7FfY8hq3mGgUtcw824rbdg0P9m%2BSXBq3rmyL%2BJkTA0qdwF5mGyfUdckkyLRhz6Pr7GlT6mTvusQzAhoeJtiBrY%2B2FcyjVhMZu%2FZPxJ7NkzvLevx%2BC5ycHL%2BJP8cWXaealOsz5dKjNIg%2BLV4uiRNKL5HL4x%2Bvj87dk3775xf%2FP%2Fzt4vM%2Ff38fRJ3dHHLJ9hU84ga1u%2F79NL359F3998fy%2FubLWro9H%2F85GOhR18%2FYWcXyeghWVnib6JWD10SO%2FtpeONhlRxdT6gYP8TcSO8aOPXPZ5wm7jnis4Zl4gc0gOI%2B%2FCOiStU7mtmPd4Ve6Cl%2FCD%2FDkKTm6mFPP%2Fs26xQ77SmYN7GsviLUJ6ZkzHsIr41t7xGfn3CeSkbdNd9gP4nMm1HHw0rfHmwcOT1lgb2a7FzQI6CLpiK5ci1jx0RbqzUHg0aet8oTXV8Qjxi2UBnlJaWOMzy2hCxJ4r%2ByUeHAhPR5t652mynqsfvO0lipxI45Hx2zb17b7r2w0YXfGXhpJL7nL4vspplTtfkjP3g47DGgXB%2BQiFJuf1jv2IfVqu6aNNh6gmQbQzPD0c9a0YhYFqCeTcJBSRYdMg0JF9Jd4Yruzu805V%2Bqu5Wv8xmETZddOnY0SzG2LDYmNkgQ4wOOt4i%2Bp7QYbkWgX7D8T3KU01M409kCX7FjeHbP%2F4elecEldpk%2FY3igOYUq6JqGiclSqdLweoFL1EE4rVAbaQ3E0AY4uXpAISSYJJvV3h2WJLZkHCyf%2BKApxDXWH%2BOzH9B6v55emNBooj7NPF8rvx9gNZRC3J0896inUAZpVFaEQdcPsDvXB8hz750%2Fo1n1%2B%2FeLI0s%2FPzpSDOllg2%2BkhFzbQZUk9sm2XFQD6vUenxPep1xPILglk8q0O3T1SuATSrEMgFbUCgTROg0DKas8gy8ZsEwrJ1SlhrgWVU8geyQbUsFsk4aQOgOfYGxcR%2B0%2BZaz73ILtgGIXdJVD%2BEyJ9NZAB3AqEW%2BFA6%2BAxce6pbwc2Dfv3onNzkB8NVQ7146JaYvEbgaoBUGckOGfPj2fkKw5C4rcZqmwEYRhX6gdrAazmsc0u9J87XOMo4SVdeT659bBFeoxrYCzLHVpk%2FjNDkxyB2vP3I%2FB3LRegRUbF8N12LngYn9e07P1k9XQDwjKMJPZ8PjWA305IWB59MELfapzocMC7jAhzHxlxQsKrxTh0FSHkNifd2EPeCPKjh4Ohsb4iS8JE4k5ee2pxFGqhZV29ATVEe%2FfMgqur0B19MGJROoIb8QqeRgmzOTLHzfS8QhjePFrRLd5w7orHY4882ziK1PW4i8Cdxy26xR2Si68MdLLuicURiAXS1YynR6hiERuSRu%2BdWXBmuj21SA3gk4xZ8HOQkFt4kc3pvYwYyLuMWvAhlwHkM%2BISDzvvP6t1ZOyPHr5AsLLJsqdTe7Jygtc78kycHn1h6Hda2MaHH%2BY%2BJx8j1Xls6JWaZK496BGAfk1XjnXteoySn8%2BYyCL8x5Q6BLu9BrSsAdrRqR5cFDXxCJsnWOdBBL3FDnrcW8bd7JDvff32Y6HMfw7Q57n6%2Bfuvx5fJYM6rZgYgE9c6DxclsiOX5gvViBUWxkTnMkHP6Yy62LneteZkHPUeXpUSUPUpus880oRUACHA3oyU5pcUPjQecRjTfc4%2BXsls%2FZ5uUnnbauF8ZCCBM%2BkieoP4qh16oCMN7ekoekPQUY1pPF8zIB2IJn8%2BVBCG5l1YL5gEdVKDNaUqe6zEOI7yxCoSr42Nuzrbrkjds4ykRMsLozmJclWGvtmQg7WDy8IFBAeKNqnSPB3ZHipa%2FmAYKJmxkATBkw7odOoTMaMA%2BkX5tEEqtp7F0cyRnhWvpg5HI13TZAOpsmKMhHkfmMz430lblxrCVRSUtePJNLv92lUYu%2BnCl9dx3WWLwdKeu9TF50hE664c5VeOqzVduTLa01F7rpyvGHB65xfseCBksO1lzonmVh6V7bnyAugF%2BBf%2Bm0P%2B3RLLquhlOsRGDBUwO4MKEuLGzqoGSGUmtjlGSJeHkqSY0kgLFzoyEpC1XMIW1Kgwv92YaB1uncQKd7tSdesHjObS%2FHVjTb%2Bozusv99p8%2BvnvH5%2FI0wWnugvIcsZ8%2BfLAN2tMhtT8WloJJj1Mc6hIu38o1sB0OKRsIW8zQgq1ECphx%2BGQMoBbDIcYfOCaWms5G8VIFs4dSqFkVS%2Ftp4BBMaDwa%2Bq0OHQoYqIIh9zbDZeYpYO4KcdKPHeuEkbcJJ5TxzDhr%2Fc6qZl8HWxa4lhydrDJApDimrUq8YA458CBo7Csbbs4Oo8pXM2MVwH1o2q23TrsS%2BpQb2fvp7bj5JoqAVpsyUvGGswM8dZKlu2N1sgjcgpCTjwAVkPKBZRju%2BFHc9lyH4pTu%2F1AFsQPlTgv4r6qM1%2FVKSAOmsvdaEmofu9K1HxA501XdfJ1FdqBD1DVWcfUyBJfyY5Q1cl%2FPhgN7Pepq75PXR3Muyzr5D8fnNduLPxVWNTRl3cIgr3Lik7%2B88FJKXGtHnSRoHdayMml7CrMWUPG3mYQa2NKku7ocgPwpu3GdrLybqXup5RLHyvQperZvISq1Yx06WhPR4LrflQ4B%2FeLJiUnH8lSCzaQFZItTKIlubXj4uJaKjTvHeVMOswYJBmnWLq6pA1H6R9BrlOpUBh5lBSKImcFoiYJ2pS%2F4a1MNURFMTilw2LdTQVXUgppraTJQVSgafg1V%2Fo5MHJdVM6aKHp5R%2B35Er5qQF%2FyFpIiJWou2pVsqwxEljfw348zRWzJ7x8h3rsHrXbA0qTOwIGe%2Ft0nRpTywmIEY6WiEiP8x4PBe0i%2BPggkCRWB8Y5Oc1UahOSby4a359tBvwHXMTIq%2BQ24BttIyMfagouvrn1KBSpZycA%2BKKUianMe%2FvMhgGS%2FCZdAwLvchYv%2FfDA6AP7eUw96u6B3uQUX%2F%2FlgAfi1HczD%2BZF0RdjrBYvNkgrdCaU1Zs36LLJ7Ol6EoLpjP%2FwVLvOTbvBmWw3ISuZ4STZcLUzSXMT0DoWSXc%2FtgDwwNQhb1h5eZpmlKB9uyFmXqhpDKROB4%2BQ7kshkGhdVGYoq29Uh8QOCfVOrmI9ctavnAlBy3QCUYe7pSHAyQ4cUyyrekveUYlAlet5tOkNIBIr%2FdpBFRWW6Xa2F6hAqIWuhhNTp8t8OusJ3l3nSRtlES2mRXzP3BXcE6GplWXfi1JNilN2f%2BRiikSrLhq4aktZCHo%2F7h1mhTSljBnHxQgNmwDoTU%2FVQdcn0QdS6adFDQbDlUJqApD0dHby8h38fM3ubgRzfd6dgUY91bSVXA6GpXCVBSfvUXVvxkBLt2XJxw85qKhJD9HbWO9SxxYo0lKTQ7JomUjSUtcwDhc3wUj9lG1ZUQw91hh5MYr67DUUAL2lhETFfmJCWlPnONzmr7tJbapqRBc7MkZ7Ks2p5T0eCZ9UarPjZzqpbcGndz6sjTRc9r84tquzOKMIqnFVxWvSkfFsdtN7OjmNcdsXZcGw4fE%2FFHnWKQEf5NHIyYUgFnVVOLkBYqYHxhvfNLP07rnt33ypYf950Jmnkkgw1Z5K6Ut6PYM9owMlea3s7du8WjVPaNtOAbLS9UP4RvNge4QrZyKG7WL7xEfbN1BQ0zO0VoI8qT52bjQYBO2eenHxVyczL19SbypcdepQGaXX38HL%2BF7VCOV3%2FHw%3D%3D)

## Requirements

- Python 3.12
- PostgreSQL

## Setup Instructions

### Unix

#### Create virtual environment

```shell
python -m venv venv
```

#### Activate virtual environment

```shell
source venv/bin/activate
```

#### Install dependencies

```shell
pip install -r requirements.txt
```

Note: If you are using a Debian-based Linux distribution, the `psycopg2` package may fail to install due to missing dependencies. Run the following command before installing the `requirements.txt` file to fix this issue.

```shell
sudo apt-get install libpq-dev python3.12-dev build-essential
```

#### Create .env file

```shell
touch .env
```

#### Add environment variables

Look into the `.env.example` file to see the required environment variables.

### Create database

```shell
cd data
sh postgres_restore_backup.sh
```

After this steps have been completed, the server is ready to be run. [Run the server](#run-the-server).

### Windows

#### Create virtual environment

```batch
python -m venv venv
```

#### Activate virtual environment

```batch
venv\Scripts\activate.bat
```

#### Install dependencies

Before installing the dependencies, note that the `uvloop` package is not compatible with Windows. If it is present in the `requirements.txt` file, it must be manually removed before running the following command. Its removal will not affect the functionality of the server.

```batch
pip install -r requirements.txt
```

#### Create .env file

```batch
cd . > .env
```

#### Add environment variables

Look into the `.env.example` file to see the required environment variables.

#### Create database

The script `postgres_restore_backup.sh` is not compatible with Windows. To restore the database, the following commands must be run in the `data` directory.

```batch
psql -U postgres -c "DROP DATABASE IF EXISTS \"NoEstasSolo\";"
psql -U postgres -c "CREATE DATABASE \"NoEstasSolo\";"
"C:\Program Files\7-Zip\7z.exe" e ./backups/NoEstasSoloTest.sql.gz -o./backups
psql -U postgres -d NoEstasSolo -f ./backups/NoEstasSoloTest.sql
```

The decompression tool used in the previous command is 7-Zip, but any other tool can be used, replacing the path on the command accordingly.

## Run the server

After the setup instructions have been completed, the server can be run. In the root of the project, run the following command to start the server:

```shell
uvicorn app.main:app --reload --host 0.0.0.0
```

Then the server will be running on `http://localhost:8000`.
